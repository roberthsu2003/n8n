![](./images/OAuth.png)

這是一個非常核心且重要的網路概念！

簡單來說，**OAuth (開放授權)** 是一種**安全委派**的標準。

它的核心功能是：**允許您 (用戶) 授權一個第三方應用程式 (例如 App)，去存取您在另一個服務 (例如 Google、Facebook) 上的資源，而不需要將您的帳號密碼告訴那個第三方應用程式。**


## 目錄

- [🔑 最佳比喻：代客泊車的鑰匙](#-最佳比喻代客泊車的鑰匙)
- [🛡️ OAuth 的主要功能與好處](#-oauth-的主要功能與好處)
- [🌐 實際生活中的例子](#-實際生活中的例子)

---

### 🔑 最佳比喻：代客泊車的鑰匙

您可以把 OAuth 想像成「**代客泊車的鑰匙**」：

1.  **您的帳號密碼**：就像您車子的**原廠主鑰匙**。它可以發動引擎、打開後車廂和手套箱。您絕對不會把主鑰匙交給泊車小弟。
2.  **OAuth 權杖 (Token)**：就像**代客泊車專用鑰匙**。這把鑰匙**只能**用來發動引擎和開關車門 (以便停車)，但**不能**打開後車廂或手套箱 (存放您私人貴重物品的地方)。
3.  **過程**：您把「泊車鑰匙」(OAuth 權杖) 交給「泊車小弟」(第三方 App)，讓他幫您「停車」(存取您的資料)。他完成了工作，但從未接觸過您的「主鑰匙」(密碼)。

最重要的是，您可以隨時讓這把「泊車鑰匙」失效 (撤銷授權)，泊車小弟就再也無法開您的車了。

---

### 🛡️ OAuth 的主要功能與好處

OAuth 的設計解決了「密碼共享」的巨大安全風險。它的主要功能體現在以下幾點：

1.  **🔒 不需共享密碼，提高安全性**
    * **過去的作法：** 某個 App 想幫您管理 Twitter，您必須把 Twitter 的帳號密碼輸入那個 App。
    * **OAuth 的作法：** 該 App 會將您導向 Twitter 官方登入頁面。您登入的是 Twitter (不是 App)，Twitter 會問您：「您是否同意這個 App 幫您發文？」您按下「同意」後，Twitter 會發給 App 一個「權杖」(Token)，App 拿著這個權杖就能幫您發文，但它**永遠不知道您的密碼**。

2.  **✅ 範圍限制 (最小權限原則)**
    * OAuth 允許您精確控制要授權的「範圍」(Scope)。
    * 例如，一個日曆 App 可能會向 Google 請求授權，但它會明確要求：
        * 「讀取您的日曆」(允許)
        * 「修改您的日曆」(允許)
        * 「刪除您的 Google 雲端硬碟檔案」(**不允許！**）
    * 您只會授予它必要的權限，而不是給它您 Google 帳戶的「所有」權力。

3.  **⏱️ 權杖具時效性且可撤銷**
    * 發給 App 的「存取權杖」(Access Token) 通常有**時間限制**，例如 1 小時後過期。
    * 如果 App 需要長期存取，它會獲得一個「刷新權杖」(Refresh Token)，用來在過期時自動換取新的存取權杖，而不需要您再次登入。
    * 最重要的是，您可以隨時到您的 Google / Facebook 帳戶設定中，**主動「撤銷」** 對某個 App 的授權，該 App 的權杖會立刻失效。

4.  ** separating 角色分離**
    * OAuth 明確定義了四個角色，讓授權流程標準化：
        * **資源擁有者 (Resource Owner)：** 就是您，擁有資料的人。
        * **客戶端 (Client)：** 就是第三方 App (例如 Spotify、Canva)。
        * **授權伺服器 (Authorization Server)：** 負責驗證您的身份並取得您同意的服務 (例如 Google 登入頁面)。
        * **資源伺服器 (Resource Server)：** 真正存放您資料的地方 (例如 Google Photos 的伺服器)。

### 🌐 實際生活中的例子

您幾乎每天都在使用 OAuth，最常見的就是：

> **「使用 Google / Facebook / Apple 帳號登入」**

當您在一個新的網站 (例如 Canva) 點擊「使用 Google 登入」時：
1.  Canva (客戶端) 把您導向 Google (授權伺服器)。
2.  您登入 Google (驗證身份)。
3.  Google 詢問：「Canva 想要存取您的基本資料和 email 地址，您同意嗎？」(這是請求「範圍」Scope)。
4.  您點擊「同意」(授權)。
5.  Google 發給 Canva 一個「權杖」。
6.  Canva 拿著權杖向 Google (資源伺服器) 說：「嗨，這位用戶同意了，請給我他的 Email。」
7.  Google 確認權杖有效，就把您的 Email 給了 Canva。
8.  Canva 幫您完成了註冊/登入。

**總結來說，OAuth 的核心功能就是建立一套標準化的「授權委派」流程，讓網路服務在不洩露您核心密碼的前提下，安全地互相串接與共享資料。**

---
