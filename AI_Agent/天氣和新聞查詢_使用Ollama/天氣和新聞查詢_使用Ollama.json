{
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "您好:\n這是台北市youbike服務中心",
        "availableInChat": true,
        "agentName": "帥氣的小犬",
        "agentDescription": "客服人員",
        "options": {
          "inputPlaceholder": "請輸入您的問題",
          "subtitle": "youbike服務中心",
          "title": "台北市交通局"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        224,
        416
      ],
      "id": "34eae216-e581-4763-8dac-67d0830741f1",
      "name": "When chat message received",
      "webhookId": "bfbd8663-9d40-4ad5-9466-2f8b0a4bc9dd"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=role>\n你是 n8n Demo AI Agent，一個友善且樂於助人的助理，專門展示 n8n 自動化平台中 AI 代理的強大功能。你的個性是鼓勵的、略帶教育性的，並且對自動化充滿熱情。你的主要功能是通過使用可用的工具來回答用戶問題並滿足他們的需求，展示你的能力。你的對話風格自然流暢。\n</role>\n\n<instructions>\n<goal>\n你的主要目標是作為使用 n8n 構建的 AI 代理的實時演示。你將與用戶互動，通過智能地使用可用工具來回答他們的問題，並解釋 AI 代理背後的概念，幫助他們理解其潛力。\n</goal>\n\n<context>\n### 我的工作原理\n我是一個在簡單 n8n 工作流程中運行的 AI 模型。這個工作流程為我提供了兩個關鍵要素：\n1. **一組工具**：這些是我可以調用的函數，用於獲取資訊或執行操作。\n2. **簡單記憶**：我可以記住當前對話的近期內容，以理解上下文。\n\n### 我的目的\n我的主要目的是作為展示。我展示了如何通過簡單的對話為各種功能（我的工具）提供聊天界面，而無需複雜的 UI。這是一種讓強大的自動化通過簡單對話變得人人可用的絕佳方式。\n\n### 工具使用指南\n如果用戶的請求符合工具的功能，你必須選擇一個可用工具。你不能自己執行這些操作；必須調用工具。\n\n### 關於 n8n 中的 AI 代理\n- **可靠性**：雖然我可以一次有效地使用一個工具，但更高級的代理可以執行多步驟任務。然而，對於複雜的關鍵任務流程，通常更可靠的做法是在 n8n 中構建結構化的逐步工作流程，而不是僅依賴代理的推理。代理非常適合面向用戶的互動，但結構化工作流程是後端可靠性的關鍵。\n- **最佳實踐**：一個好的做法是保持代理的工具集專注，通常少於 10-15 個工具，以確保可靠性並防止混淆。\n\n### 當前日期與時間\n{{ $now.toFormat('yyyy-MM-dd HH:mm:ss') }} (台北時間)\n</context>\n\n<output_format>\n- 以友善、對話式和樂於助人的語氣回應。\n- 當用戶的請求需要工具時，首先選擇適當的工具。然後，以清晰易懂的方式向用戶呈現工具執行的結果。\n- 保持主動。如果用戶不確定該做什麼，根據你的可用工具建議一些他們可以詢問的範例（例如：談論你的工具和你對自己的了解）。\n- 使用繁體中文回應，保持專業且友善的態度。\n</output_format>\n</instructions>"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        432,
        416
      ],
      "id": "2ce56f54-9d8d-4919-9ad7-8460d470e394",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": "gpt-oss:20b-cloud",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        128,
        608
      ],
      "id": "87b666ca-f7b0-4cb0-9123-e6daffed2161",
      "name": "Ollama Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "puHSzMoUUx9WwTbB",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        496,
        592
      ],
      "id": "85acf57b-1f1a-45ea-b4c5-b8d612e77271",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "modelName": "=gemini-3-flash-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        320,
        592
      ],
      "id": "8df55a66-1f0d-49f4-8358-95c426f025bb",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "a2DHnK6MGTaS59sC",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "=取得任意地點和時段的天氣預報。\n\n重要使用規則：\n\n1. 取得目前天氣（「now」、「today」、「current」）：\n\n- 僅使用「current」參數\n\n- 請勿提供 start_date 或 end_date\n\n- 例如：current=temperature_2m,windspeed_10m,rain\n\n2. 取得每小時天氣預報（具體日期）：\n\n- 使用“hourly”參數，並指定 start_date 和 end_date\n\n- 最適合單日天氣預報\n\n- 例如：hourly=temperature_2m,precipitation\n\n3. 取得每日天氣預報（多日概覽）：\n\n- 使用「daily」參數，並指定 start_date 和 end_date\n\n- 最適合每週天氣預報\n\n- 例如：daily=temperature_2m_max,precipitation_sum\n\n地點：始終根據城市名稱自動推斷緯度和經度。\n\n日期：使用 YYYY-MM-DD 格式。如果未指定，則使用今天為 start_date。\n\n溫度：預設單位為攝氏度，除非使用者指定為華氏度。",
        "url": "=https://api.open-meteo.com/v1/forecast",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "latitude",
              "value": "={{ $fromAI('latitude', '位置緯度。可根據城市名稱自動推斷。例如：台北的緯度為 25.03。', 'number') }}"
            },
            {
              "name": "longitude",
              "value": "={{ $fromAI('longitude', '位置的經度。可根據城市名稱自動推斷。例如：台北的經度為 121.56。', 'number') }}"
            },
            {
              "name": "current",
              "value": "={{ $fromAI('current', '目前天氣變數（逗號分隔，無空格）。僅用於當前/現在查詢。用於天氣預報查詢時留空。例如：temperature_2m,windspeed_10m,rain。選項：temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weathercode,cloudcover_total,pressure_msl,surface_pressure,windspeed_10m,winddirection_10m,winsurface_pressure,windspeed_10m,winddirection_10m,wind', 'string') }}"
            },
            {
              "name": "hourly",
              "value": "={{ $fromAI('hourly', '每小時天氣變數（逗號分隔，無空格）。用於單日詳細天氣預報。留空則顯示目前天氣或每日概覽。例如：temperature_2m,precipitation。選項：temperature_2m,relative_humidity_2m,dewpoint_2m,apparent_temperature,precipitation,rain,showers,snowfall,snow_depth,pressure_msl,surface_pressure,cloudcover_total,cloudcover_low,cloudc over_mid,cloudcover_high,windspeed_10m,winddirection_10m,windgusts_10m,consibility,is_day,sunshine_duration,soil_temperature,soil_moisture,PM10,PM2.5,carbon_monoxoxet', 'string') }}"
            },
            {
              "name": "daily",
              "value": "={{ $fromAI('daily', '每日天氣變數（逗號分隔，無空格）。用於多日天氣預報概覽。留空則顯示目前天氣或每小時詳情。例如：temperature_2m_max,precipitation_sum。選項：weathercode,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,sunrise,sunset,dayl ight_duration,sunshine_duration,pressure_msl_max,pressure_msl_min,surface_pressure_max,surface_pressure_min,windgusts_10m_max,windspeed_10m_max,winddirection_10m_dominant,shortwave_radiation_sum', 'string') }}"
            },
            {
              "name": "start_date",
              "value": "={{ $fromAI('start_date', '起始日期格式為 YYYY-MM-DD。每小時/每日天氣預報必須填寫此項目。留空則顯示目前天氣。如果未指定，則預設為今天。', 'string', $now.toFormat('yyyy-MM-dd')) }}"
            },
            {
              "name": "end_date",
              "value": "={{ $fromAI('end_date', '結束日期格式為 YYYY-MM-DD。必須晚於開始日期。小時/每日天氣預報為必填項。留空則表示目前天氣。如果未指定，則預設為 7 天後。', 'string', $now.plus({ days: 7 }).toFormat('yyyy-MM-dd')) }}"
            },
            {
              "name": "temperature_unit",
              "value": "={{ $fromAI('temperature_unit', '溫度單位：celsius or fahrenheit', 'string', 'celsius') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        720,
        592
      ],
      "id": "d600f9c1-535b-4598-a29a-1a7e75a3a1e5",
      "name": "取得天氣"
    },
    {
      "parameters": {
        "toolDescription": "=# 台灣科技與新聞媒體 RSS Feed 清單（適合 n8n 使用）\n\n## 一、科技新聞媒體\n\n### 1. TechNews 科技新報\n- 類型：純科技新聞（半導體、網際網路、能源、AI 等）\n- RSS feed 網址：\n  - 全站最新文章：`https://technews.tw/feed/`\n- 說明：台灣主要科技媒體之一，內容偏產業與技術新聞，適合訂閱最新科技動態。\n\n### 2. 數位時代（DigitalTimes）\n- 類型：科技、數位轉型、新創、產業趨勢\n- RSS feed（建議透過 RSSHub 轉換）：\n  - RSSHub 路徑範例：`https://rsshub.app/digitaltimes/category/<category>`（需依實際分類調整）\n- 說明：可作為「沒有明顯原生 RSS 的網站」教學範例，搭配 RSSHub 使用。\n\n---\n\n## 二、科技產業與市場分析\n\n### 3. TrendForce（集邦科技）\n- 類型：半導體、面板、儲存、AI、車用電子等產業分析與新聞\n- RSS feed 網址（分類）：\n  - RSS 訂閱中心：`https://www.trendforce.com.tw/presscenter/rss.html`\n  - 各產業分類 RSS（例如記憶體、顯示器、IC 設計等）可從該頁面取得。\n- 說明：適合訂閱特定產業的市場新聞與報告摘要。\n\n---\n\n## 三、新聞網站中的科技／3C 分類\n\n### 4. Newtalk 新聞（科技分類）\n- 類型：綜合新聞，含科技、3C、網路等頻道\n- RSS feed 網址：\n  - RSS 總頁：`https://newtalk.tw/rss/index/`\n  - 科技頻道 RSS（實際網址依頁面顯示為主，例如 `https://newtalk.tw/rss/tech.xml` 或類似路徑）。\n- 說明：可用來訂閱「科技」分類的新聞，適合做分類 feed 教學。\n\n### 5. 風傳媒（科技／3C 相關頻道）\n- 類型：綜合新聞，含科技、3C、網路等內容\n- RSS feed 網址：\n  - RSS 總頁：`https://www.storm.mg/feed`\n  - 各頻道 RSS（例如科技、3C 等）可從該頁面取得。\n- 說明：可訂閱特定頻道，示範「只抓取某個分類」的 RSS 使用方式。\n\n---\n\n## 四、通訊社與政府相關（可做補充）\n\n### 6. 中央通訊社（CNA）\n- 類型：綜合新聞，含科技、產業相關報導\n- RSS feed 網址：\n  - RSS 服務頁：`https://www.cna.com.tw/about/rss.aspx`\n  - 各分類 RSS（即時、國際、財經、科技等）可從該頁面取得。\n- 說明：可做為「多分類 RSS」示範，例如只訂閱「科技」分類。\n\n### 7. 公共電視（PTS）科技相關新聞\n- 類型：新聞與專題，偶有科技與數位議題\n- RSS feed 網址：\n  - RSS 服務頁：`https://about.pts.org.tw/rss/index.html`\n- 說明：可用來示範「公共媒體 RSS」與一般商業媒體的差異。\n\n---\n\n目前台灣時間{{ $now }}\n",
        "url": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.rssFeedReadTool",
      "typeVersion": 1.2,
      "position": [
        608,
        592
      ],
      "id": "71f1fa4a-4d88-49c5-a85f-45564aab7680",
      "name": "RSS Read"
    }
  ],
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "取得天氣": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "RSS Read": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "d135f5bcfa8bdece905b6d778df94a7be68624c12d1878e14ba64eeb17a04d82"
  }
}