{
  "name": "02_RAGæ–‡ä»¶ç´¢å¼•_Google_DriveåŒæ­¥",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 2 * * *"
            }
          ]
        }
      },
      "id": "schedule-trigger-001",
      "name": "â° æ¯æ—¥å‡Œæ™¨2é»åŸ·è¡Œ",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [240, 400],
      "notes": "ğŸ“… æ’ç¨‹è¨­å®š:\n- æ¯å¤©å‡Œæ™¨ 2:00 è‡ªå‹•åŸ·è¡Œ\n- å¯æ”¹ç‚ºæ‰‹å‹•è§¸ç™¼æ¸¬è©¦\n- Cron è¡¨é”å¼: 0 2 * * *"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "list",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "queryString": "(mimeType='application/pdf' or mimeType='application/vnd.openxmlformats-officedocument.wordprocessingml.document' or mimeType='text/plain') and trashed=false",
        "options": {
          "fields": [
            "id",
            "name",
            "mimeType",
            "modifiedTime",
            "createdTime",
            "size",
            "webViewLink"
          ]
        }
      },
      "id": "google-drive-list-001",
      "name": "ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [480, 400],
      "notes": "ğŸ” æª”æ¡ˆéæ¿¾æ¢ä»¶:\nâœ… PDF æª”æ¡ˆ\nâœ… Word æª”æ¡ˆ (.docx)\nâœ… ç´”æ–‡å­—æª” (.txt)\nâŒ æ’é™¤å·²åˆªé™¤æª”æ¡ˆ"
    },
    {
      "parameters": {
        "batchSize": 1,
        "options": {}
      },
      "id": "split-batches-001",
      "name": "ğŸ”„ é€ä¸€è™•ç†æª”æ¡ˆ",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [720, 400],
      "notes": "âš™ï¸ æ‰¹æ¬¡è™•ç†è¨­å®š:\n- æ¯æ¬¡è™•ç† 1 å€‹æª”æ¡ˆ\n- é¿å…è¨˜æ†¶é«”æº¢å‡º\n- å¯è¿½è¹¤è™•ç†é€²åº¦"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "download",
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.id }}"
        },
        "options": {
          "googleFileConversion": {
            "conversion": {
              "docsToFormat": "text/plain"
            }
          }
        }
      },
      "id": "google-drive-download-001",
      "name": "â¬‡ï¸ ä¸‹è¼‰æª”æ¡ˆå…§å®¹",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [960, 400],
      "notes": "ğŸ“¥ ä¸‹è¼‰è¨­å®š:\n- è‡ªå‹•è½‰æ› Google Docs ç‚ºç´”æ–‡å­—\n- ä¿ç•™åŸå§‹æ ¼å¼è³‡è¨Š\n- ä¸‹è¼‰è‡³ binary è³‡æ–™"
    },
    {
      "parameters": {
        "operation": "extractFromFile",
        "binaryPropertyName": "data",
        "options": {}
      },
      "id": "extract-file-002",
      "name": "ğŸ“„ æå–æª”æ¡ˆå…§å®¹",
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [1200, 400]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "assign-101",
              "name": "content",
              "value": "={{ $json.data }}",
              "type": "string"
            },
            {
              "id": "assign-102",
              "name": "source",
              "value": "google_drive",
              "type": "string"
            },
            {
              "id": "assign-103",
              "name": "file_name",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.name }}",
              "type": "string"
            },
            {
              "id": "assign-104",
              "name": "file_id",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.id }}",
              "type": "string"
            },
            {
              "id": "assign-105",
              "name": "mime_type",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.mimeType }}",
              "type": "string"
            },
            {
              "id": "assign-106",
              "name": "modified_time",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.modifiedTime }}",
              "type": "string"
            },
            {
              "id": "assign-107",
              "name": "created_time",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.createdTime }}",
              "type": "string"
            },
            {
              "id": "assign-108",
              "name": "file_size",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.size }}",
              "type": "number"
            },
            {
              "id": "assign-109",
              "name": "web_link",
              "value": "={{ $('ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ').item.json.webViewLink }}",
              "type": "string"
            },
            {
              "id": "assign-110",
              "name": "sync_time",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "set-metadata-002",
      "name": "ğŸ·ï¸ è¨­å®šæª”æ¡ˆè³‡è¨Š",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [1440, 400]
    },
    {
      "parameters": {
        "chunkSize": 800,
        "chunkOverlap": 200
      },
      "id": "text-splitter-002",
      "name": "âœ‚ï¸ éè¿´å­—å…ƒåˆ†å‰²å™¨",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [1680, 400]
    },
    {
      "parameters": {
        "model": "text-embedding-004",
        "options": {}
      },
      "id": "embeddings-002",
      "name": "ğŸ§  Google Gemini åµŒå…¥",
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [1680, 600]
    },
    {
      "parameters": {
        "mode": "insert",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "source",
                "value": "={{ $json.source }}"
              },
              {
                "name": "file_name",
                "value": "={{ $json.file_name }}"
              },
              {
                "name": "file_id",
                "value": "={{ $json.file_id }}"
              },
              {
                "name": "mime_type",
                "value": "={{ $json.mime_type }}"
              },
              {
                "name": "modified_time",
                "value": "={{ $json.modified_time }}"
              },
              {
                "name": "created_time",
                "value": "="{{ $json.created_time }}"
              },
              {
                "name": "file_size",
                "value": "={{ $json.file_size }}"
              },
              {
                "name": "web_link",
                "value": "={{ $json.web_link }}"
              },
              {
                "name": "sync_time",
                "value": "={{ $json.sync_time }}"
              }
            ]
          }
        }
      },
      "id": "vector-store-002",
      "name": "ğŸ’¾ Simple Vector Store (æ’å…¥)",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1,
      "position": [1920, 400]
    }
  ],
  "connections": {
    "â° æ¯æ—¥å‡Œæ™¨2é»åŸ·è¡Œ": {
      "main": [
        [
          {
            "node": "ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‚ åˆ—å‡º Google Drive æª”æ¡ˆ": {
      "main": [
        [
          {
            "node": "ğŸ”„ é€ä¸€è™•ç†æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”„ é€ä¸€è™•ç†æª”æ¡ˆ": {
      "main": [
        [
          {
            "node": "â¬‡ï¸ ä¸‹è¼‰æª”æ¡ˆå…§å®¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "â¬‡ï¸ ä¸‹è¼‰æª”æ¡ˆå…§å®¹": {
      "main": [
        [
          {
            "node": "ğŸ“„ æå–æª”æ¡ˆå…§å®¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“„ æå–æª”æ¡ˆå…§å®¹": {
      "main": [
        [
          {
            "node": "ğŸ·ï¸ è¨­å®šæª”æ¡ˆè³‡è¨Š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ·ï¸ è¨­å®šæª”æ¡ˆè³‡è¨Š": {
      "main": [
        [
          {
            "node": "âœ‚ï¸ éè¿´å­—å…ƒåˆ†å‰²å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âœ‚ï¸ éè¿´å­—å…ƒåˆ†å‰²å™¨": {
      "main": [
        [
          {
            "node": "ğŸ’¾ Simple Vector Store (æ’å…¥)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  Google Gemini åµŒå…¥": {
      "ai_embedding": [
        [
          {
            "node": "ğŸ’¾ Simple Vector Store (æ’å…¥)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-17T00:00:00.000Z",
      "updatedAt": "2025-01-17T00:00:00.000Z",
      "id": "tag-003",
      "name": "RAGç³»çµ±"
    },
    {
      "createdAt": "2025-01-17T00:00:00.000Z",
      "updatedAt": "2025-01-17T00:00:00.000Z",
      "id": "tag-004",
      "name": "è‡ªå‹•åŒæ­¥"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-01-17T00:00:00.000Z",
  "versionId": "workflow-02-v1"
}
